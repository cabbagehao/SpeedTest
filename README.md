# 优化版网速测试工具

这是一个使用React和TypeScript构建的网速测试工具，提供准确的下载速度、上传速度、网络延迟(ping)和抖动(jitter)测量。

## 功能特点

- **全面测试**: 测量下载、上传速度、ping值和网络抖动
- **多阶段测试**: 使用不同大小的测试文件获取更准确的结果
- **预热机制**: 先建立连接预热再进行测试，排除初始连接延迟
- **图形界面**: 实时显示测试进度和结果
- **历史记录**: 保存最近10次测试结果用于比较
- **响应式设计**: 适配各种屏幕尺寸
- **专用后端服务器**: 提供准确的测速服务

## 技术实现

- **前端框架**: React + TypeScript
- **UI设计**: Tailwind CSS + Lucide图标
- **后端技术**: Node.js + Express
- **测试方法**:
  - 多样本收集和平均值计算
  - 实际数据上传测试
  - 精确的延迟和抖动计算
  - 防止缓存的随机参数

## 项目结构

```
/
├── src/             # 前端源代码
│   ├── components/  # React组件
│   ├── services/    # 服务模块
│   └── App.tsx      # 主应用组件
├── server/          # 后端测速服务器
│   ├── index.js     # 服务器入口
│   ├── test-files/  # 测试文件存储
│   └── README.md    # 服务器文档
└── README.md        # 项目文档
```

## 测速原理

1. **Ping测试**: 
   - 执行5次HTTP请求测量网络延迟
   - 排除最高和最低值计算平均延迟
   - 计算抖动(延迟的标准差)

2. **下载测试**:
   - 从专用测速服务器下载不同大小的测试文件(256KB到5MB)
   - 记录每个文件的下载时间
   - 计算有效带宽并排除异常值

3. **上传测试**:
   - 创建随机二进制数据
   - 通过FormData上传到测试服务器
   - 服务器接收并测量上传速度

## 运行说明

### 前端应用

```bash
# 安装依赖
npm install

# 开发模式运行
npm run dev

# 构建生产版本
npm run build
```

### 后端服务器

```bash
# 进入服务器目录
cd server

# 安装依赖
npm install

# 启动服务器
npm start

# 开发模式启动（自动重启）
npm run dev
```

**重要**: 前端应用需要后端服务器才能进行准确的速度测试。确保在使用前端之前启动后端服务器。

## 配置选项

- 前端配置: 在`src/services/speedTest.ts`中修改`SPEED_TEST_SERVER`配置
- 后端配置: 通过环境变量配置，例如`PORT=4000 npm start`

## 未来改进

- 部署多地域测速服务器节点
- 添加地理位置感知的服务器选择
- 实现WebRTC P2P测速功能
- 添加更详细的网络诊断工具
- 提供网络质量历史趋势图表

## 许可

本项目使用MIT许可证 